---
import { Card as ShadcnCard } from './ui/card'

const {
  as: Tag = 'a',
  class: className,
  href,
  heading,
  subheading,
  imagePath,
  altText,
  repo,
  live,
} = Astro.props
---
<!-- If href is provided make whole card clickable; otherwise use div-like behavior -->
<Tag href={href ?? undefined} class={className ?? ''} style="text-decoration: none;">
  <ShadcnCard
    class={`h-full flex flex-col overflow-hidden rounded-2xl shadow-lg transition-transform duration-150 ease-in-out transform hover:-translate-y-0.5 ${href ? 'cursor-pointer hover:border-primary' : ''}`}
  >
    <!-- fixed height image area so all cards have same visual height -->
    <div class="h-40 md:h-44 w-full overflow-hidden bg-gray-800">
      <img
        src={imagePath}
        alt={altText ?? heading}
        class="h-full w-full object-cover"
        loading="eager"
      />
    </div>

    <!-- flexible content area to keep cards same height -->
    <div class="flex flex-col grow justify-between px-4 py-4">
      <div>
        <h3 class="text-base md:text-lg font-medium leading-tight text-foreground">{heading}</h3>
        {subheading && <p class="text-sm text-muted-foreground mt-1">{subheading}</p>}
      </div>

      <div class="mt-3 flex gap-3 items-center">
        {repo &&
          <a
            class="text-sm font-medium underline hover:text-primary"
            href={repo}
            target="_blank"
            rel="noopener noreferrer"
            on:click={(e) => e.stopPropagation()}
          >
            GitHub
          </a>
        }
        {live &&
          <a
            class="text-sm font-medium underline hover:text-primary"
            href={live}
            target="_blank"
            rel="noopener noreferrer"
            on:click={(e) => e.stopPropagation()}
          >
            Live
          </a>
        }
      </div>
    </div>
  </ShadcnCard>
</Tag>
